{
  "name": "üîÑ Job Change Monitoring",
  "description": "Monitor key contacts for job changes. Get alerted when prospects or champions leave their companies - a prime opportunity to re-engage or protect your accounts.",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "weeks",
              "weeksInterval": 1
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "‚è∞ Weekly Check",
      "type": "n8n-nodes-base.scheduleTrigger",
      "typeVersion": 1.2,
      "position": [240, 300],
      "notesInFlow": true,
      "notes": "‚úèÔ∏è CONFIGURE: Runs weekly. Adjust frequency in node settings."
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "profile_url",
              "value": "https://www.example.com/in/jesseoue/"
            },
            {
              "name": "expected_company_domain",
              "value": "leadmagic.io"
            },
            {
              "name": "contact_name",
              "value": "Jesse Ouellette"
            }
          ]
        },
        "options": {}
      },
      "id": "set-contact",
      "name": "üìù Input: Contact to Monitor",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [460, 300],
      "notesInFlow": true,
      "notes": "‚úèÔ∏è CONFIGURE: Add profile URL, current company domain, and name. Connect to CRM for bulk monitoring."
    },
    {
      "parameters": {
        "resource": "people",
        "operation": "detectJobChange",
        "profile_url": "={{ $json.profile_url }}",
        "companyIdentifier": "domain",
        "company_domain": "={{ $json.expected_company_domain }}"
      },
      "id": "job-change-detector",
      "name": "üîç Detect Job Change",
      "type": "n8n-nodes-leadmagic.leadMagic",
      "typeVersion": 2,
      "position": [680, 300],
      "credentials": {
        "leadMagicApi": {
          "id": "leadmagic-credentials",
          "name": "LeadMagic API"
        }
      },
      "notesInFlow": true,
      "notes": "üí≥ 3 credits ‚Ä¢ Compares current role vs expected company"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict"
          },
          "conditions": [
            {
              "id": "job-changed",
              "leftValue": "={{ $json.job_change_detected }}",
              "rightValue": true,
              "operator": {
                "type": "boolean",
                "operation": "true"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "id": "if-job-changed",
      "name": "üîÑ Changed Jobs?",
      "type": "n8n-nodes-base.if",
      "typeVersion": 2,
      "position": [900, 300],
      "notesInFlow": true,
      "notes": "Routes based on job change detection"
    },
    {
      "parameters": {
        "jsCode": "/*\n * Build job change alert with all relevant details\n */\n\nconst contactName = $('üìù Input: Contact to Monitor').first().json.contact_name;\nconst expectedDomain = $('üìù Input: Contact to Monitor').first().json.expected_company_domain;\nconst result = $json;\n\nreturn {\n  alert_type: 'üö® JOB_CHANGE_DETECTED',\n  priority: 'HIGH',\n  contact: {\n    name: contactName,\n    profile_url: $('üìù Input: Contact to Monitor').first().json.profile_url\n  },\n  change: {\n    old_company: expectedDomain,\n    new_company: result.current_company,\n    new_title: result.current_position?.title,\n    summary: result.summary\n  },\n  opportunity: {\n    timing_note: 'üî• First 90 days at new company = prime buying window',\n    suggested_actions: [\n      '1Ô∏è‚É£ Send congrats message immediately',\n      '2Ô∏è‚É£ Update CRM with new company info',\n      '3Ô∏è‚É£ Add to new company account in CRM',\n      '4Ô∏è‚É£ Schedule re-intro call in 2-3 weeks',\n      '5Ô∏è‚É£ Check if old company needs new champion'\n    ]\n  },\n  detected_at: new Date().toISOString()\n};"
      },
      "id": "prepare-alert",
      "name": "üö® Build Alert",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1120, 200],
      "notesInFlow": true,
      "notes": "Creates actionable alert with recommended next steps"
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "status",
              "value": "NO_CHANGE"
            },
            {
              "name": "message",
              "value": "={{ $json.summary }}"
            },
            {
              "name": "current_role",
              "value": "={{ $json.current_position.title }} at {{ $json.current_company }}"
            }
          ]
        },
        "options": {}
      },
      "id": "no-change",
      "name": "‚úÖ No Change",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [1120, 400],
      "notesInFlow": true,
      "notes": "Contact still at same company - no action needed"
    },
    {
      "parameters": {
        "values": {
          "string": [
            {
              "name": "action",
              "value": "ALERT_READY"
            }
          ]
        },
        "options": {
          "includeBinary": true
        }
      },
      "id": "output-alert",
      "name": "üîî Alert Ready",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [1340, 200],
      "notesInFlow": true,
      "notes": "üîå CONNECT: Add Slack, email alert, or CRM update node"
    }
  ],
  "connections": {
    "‚è∞ Weekly Check": {
      "main": [
        [
          {
            "node": "üìù Input: Contact to Monitor",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìù Input: Contact to Monitor": {
      "main": [
        [
          {
            "node": "üîç Detect Job Change",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîç Detect Job Change": {
      "main": [
        [
          {
            "node": "üîÑ Changed Jobs?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîÑ Changed Jobs?": {
      "main": [
        [
          {
            "node": "üö® Build Alert",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "‚úÖ No Change",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üö® Build Alert": {
      "main": [
        [
          {
            "node": "üîî Alert Ready",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [
    {
      "name": "LeadMagic",
      "id": "leadmagic"
    },
    {
      "name": "Job Changes",
      "id": "job-changes"
    },
    {
      "name": "Sales Triggers",
      "id": "triggers"
    }
  ],
  "meta": {
    "description": "Monitor contacts for job changes and get alerts when they move companies. Uses 3 LeadMagic credits per check.",
    "templateId": "leadmagic-job-change-monitoring",
    "templateCredsSetupCompleted": false
  }
}
